# Log Command

ログ関連のコマンドを提供します。

|機能名|概要|アサート|エビデンス|
|:---|:---|:---|:---|
|[LogExtractDuringTime](#LogExtractDuringTime)|SCPによるファイル取得|-|Yes|

------

### LogExtractDuringTime

#### Function

1. ログの切り出しを行います。
1. 既に取得したログに対して行います。
1. 指定したFlowIDの処理時間の間のログを切り出して上書き保存します。
1. この機能はテスト環境と`ETTT`が稼働しているサーバの時刻がNTPサーバ等で同期されていないと正しく動かない場合があります。
1. 日時の解決は、ログのヘッダ部に出力される日時フォーマットを正規表現で解決します。
1. 前後バッファ時間を設ける機能があります。ある程度余裕を持ってログの抽出が行えますが正確性が落ちます。 

#### Structure

```yaml
commands:
  - id: "コマンドのID"
    summary : "コマンドの概要（任意）"
    description : "コマンドの詳細（任意）"
    command: "LogExtractDuringTime"
    target: "抽出対象のログ取得を行ったFlowIDを指定" # (1)
    targetFlow: "抽出対象の処理を行ったFlowIDを指定" # (2)
    extractPattern: "ログの日付部分を抽出するための正規表現" # (3)
    group: 1 # (4)
    datePattern: "yyyy-MM-dd HH:mm:ss.SSS" # (5)
    encoding: "UTF-8" # (6)
    roundBuffer: 0
    roundBufferTimeUnit: "secound"
```

1. 抽出対象のログ取得を行ったFlowIDを指定します。
1. リモートに配置しているパスを指定します。
1. ログのヘッダ部分等に出力されている日付部分を抽出するための正規表現パターン。一部分の抜粋にはグループを用います。
1. `extractPattern`で指定したパターンにマッチした場合に、どのグループを抽出対象とするかを指定します。デフォルトでは`1`となっています。
1. ログファイルを読み込む際のエンコーディングの指定を行います。デフォルトでは`UTF-8`となっています。
1. 抽出を行う前後にバッファとなる時間を設けて日付時間の差分が多少あっても問題なくログを取れるようにするための時間を指定します。※機能実装保留※
1. `roundBuffer`にて指定した数値の単位を指定します。※機能実装保留※